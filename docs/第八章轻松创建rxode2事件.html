<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第八章轻松创建rxode2事件 | _main.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="第八章轻松创建rxode2事件 | _main.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第八章轻松创建rxode2事件 | _main.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="第七章rxode2事件.html"/>
<link rel="next" href="第九章求解和求解选项.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>rxode2用户手册中文版</a></li>
<li class="chapter" data-level="" data-path="第一章导言.html"><a href="第一章导言.html"><i class="fa fa-check"></i>第一章导言</a></li>
<li class="chapter" data-level="" data-path="第二章作者和致谢.html"><a href="第二章作者和致谢.html"><i class="fa fa-check"></i>第二章作者和致谢</a>
<ul>
<li class="chapter" data-level="" data-path="第二章作者和致谢.html"><a href="第二章作者和致谢.html#作者"><i class="fa fa-check"></i>2.1作者</a></li>
<li class="chapter" data-level="" data-path="第二章作者和致谢.html"><a href="第二章作者和致谢.html#贡献者"><i class="fa fa-check"></i>2.2贡献者</a></li>
<li class="chapter" data-level="" data-path="第二章作者和致谢.html"><a href="第二章作者和致谢.html#rxode致谢"><i class="fa fa-check"></i>2.3RxODE致谢：</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第三章相关-r-包.html"><a href="第三章相关-r-包.html"><i class="fa fa-check"></i>第三章相关 R 包</a>
<ul>
<li class="chapter" data-level="" data-path="第三章相关-r-包.html"><a href="第三章相关-r-包.html#常微分方程求解"><i class="fa fa-check"></i>3.1 常微分方程求解</a></li>
<li class="chapter" data-level="" data-path="第三章相关-r-包.html"><a href="第三章相关-r-包.html#已求解的pk系统"><i class="fa fa-check"></i>3.2已求解的PK系统</a>
<ul>
<li class="chapter" data-level="" data-path="第三章相关-r-包.html"><a href="第三章相关-r-包.html#以下在cran上的软件包含有已求解的pk系统"><i class="fa fa-check"></i>3.2.1以下在CRAN上的软件包含有已求解的PK系统</a></li>
<li class="chapter" data-level="" data-path="第三章相关-r-包.html"><a href="第三章相关-r-包.html#非cran库中的程序包"><i class="fa fa-check"></i>3.2.2非CRAN库中的程序包：</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="第四章安装.html"><a href="第四章安装.html"><i class="fa fa-check"></i>第四章安装</a>
<ul>
<li class="chapter" data-level="" data-path="第四章安装.html"><a href="第四章安装.html#windows"><i class="fa fa-check"></i>4.0.1Windows</a></li>
<li class="chapter" data-level="" data-path="第四章安装.html"><a href="第四章安装.html#mac-osx"><i class="fa fa-check"></i>4.0.2 Mac OSX</a></li>
<li class="chapter" data-level="" data-path="第四章安装.html"><a href="第四章安装.html#linux"><i class="fa fa-check"></i>4.0.3Linux</a></li>
<li class="chapter" data-level="" data-path="第四章安装.html"><a href="第四章安装.html#开发版本"><i class="fa fa-check"></i>4.1开发版本</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第五章入门.html"><a href="第五章入门.html"><i class="fa fa-check"></i>第五章入门</a>
<ul>
<li class="chapter" data-level="" data-path="第五章入门.html"><a href="第五章入门.html#指定ode参数和初始条件"><i class="fa fa-check"></i>5.1指定ODE参数和初始条件</a></li>
<li class="chapter" data-level="" data-path="第五章入门.html"><a href="第五章入门.html#在rxode2中指定给药和采样"><i class="fa fa-check"></i>5.2在rxode2中指定给药和采样</a></li>
<li class="chapter" data-level="" data-path="第五章入门.html"><a href="第五章入门.html#求解ode"><i class="fa fa-check"></i>5.3求解ODE</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html"><i class="fa fa-check"></i>第六章rxode2语法</a>
<ul>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#示例"><i class="fa fa-check"></i>6.1示例</a></li>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#语法"><i class="fa fa-check"></i>6.2语法</a>
<ul>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#标识符"><i class="fa fa-check"></i>6.2.1 标识符</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#逻辑运算符"><i class="fa fa-check"></i>6.3逻辑运算符</a></li>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#cmt改变状态的房室编号"><i class="fa fa-check"></i>6.4cmt()改变状态的房室编号</a>
<ul>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#rxode2如何编号房室"><i class="fa fa-check"></i>6.4.1rxode2如何编号房室</a></li>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#使用cmt预声明更改房室"><i class="fa fa-check"></i>6.4.2 使用<code>cmt()</code>预声明更改房室</a></li>
<li class="chapter" data-level="" data-path="第六章rxode2语法.html"><a href="第六章rxode2语法.html#用cmt将房室附加到模型"><i class="fa fa-check"></i>6.4.3用<code>cmt()</code>将房室附加到模型</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html"><i class="fa fa-check"></i>第七章rxode2事件</a>
<ul>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#rxode2事件表"><i class="fa fa-check"></i>7.1rxode2事件表</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#单次给药额外附加的给药"><i class="fa fa-check"></i>7.2单次给药/额外附加的给药</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#输注给药"><i class="fa fa-check"></i>7.3输注给药</a>
<ul>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#已知输注速率或输注时长的输注"><i class="fa fa-check"></i>7.3.1已知输注速率或输注时长的输注</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#需要估计输注时长或输注速率的输注零级速率吸收"><i class="fa fa-check"></i>7.3.2需要估计输注时长或输注速率的输注(零级速率吸收)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#稳态"><i class="fa fa-check"></i>7.4稳态</a>
<ul>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#复杂加药的稳定状态"><i class="fa fa-check"></i>7.4.1复杂加药的稳定状态</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#输注或零阶吸收过程的稳态"><i class="fa fa-check"></i>7.4.2输注或零阶吸收过程的稳态</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#重置事件"><i class="fa fa-check"></i>7.5重置事件</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#关闭房室"><i class="fa fa-check"></i>7.6关闭房室</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#经典的rxode2事件"><i class="fa fa-check"></i>7.7经典的rxode2事件</a>
<ul>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#使用经典rxode的evid设置注入给药示例"><i class="fa fa-check"></i>7.7.1使用经典RxODE的EVID设置注入给药示例</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#使用经典rxode的evid设置输注事件示例"><i class="fa fa-check"></i>7.7.2使用经典RxODE的EVID设置输注事件示例</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#使用经典rxode的evid设置稳态的例子"><i class="fa fa-check"></i>7.7.3使用经典RxODE的EVID设置稳态的例子</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#使用经典rxode的evid关闭房室"><i class="fa fa-check"></i>7.7.4使用经典RxODE的EVID关闭房室</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#rxode2-nlmixr的数据集"><i class="fa fa-check"></i>7.8rxode2 &amp; nlmixr的数据集</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#按使用类型描述的列"><i class="fa fa-check"></i>7.9按使用类型描述的列</a>
<ul>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#个体标识符列"><i class="fa fa-check"></i>7.9.1个体标识符列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#观测列"><i class="fa fa-check"></i>7.9.2观测列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#给药列"><i class="fa fa-check"></i>7.9.3给药列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#协变量列"><i class="fa fa-check"></i>7.9.4协变量列</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#特定数据集列的详细信息"><i class="fa fa-check"></i>7.10特定数据集列的详细信息</a>
<ul>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#amt列"><i class="fa fa-check"></i>7.10.1 <code>AMT</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#censlimit列"><i class="fa fa-check"></i>7.10.2 <code>CENS</code>/<code>LIMIT</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#cmt列"><i class="fa fa-check"></i>7.10.3 <code>CMT</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#dur列"><i class="fa fa-check"></i>7.10.4 <code>DUR</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#dv列"><i class="fa fa-check"></i>7.10.5 <code>DV</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#dvid列"><i class="fa fa-check"></i>7.10.6 <code>DVID</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#evid列"><i class="fa fa-check"></i>7.10.7 <code>EVID</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#id列"><i class="fa fa-check"></i>7.10.8 <code>ID</code>列</a></li>
<li class="chapter" data-level="" data-path="第七章rxode2事件.html"><a href="第七章rxode2事件.html#rate列"><i class="fa fa-check"></i>7.10.9 <code>RaTE</code>列</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html"><i class="fa fa-check"></i>第八章轻松创建rxode2事件</a>
<ul>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#向事件表添加给药"><i class="fa fa-check"></i>8.1向事件表添加给药</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#将采样添加到事件表"><i class="fa fa-check"></i>8.2 将采样添加到事件表</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#将事件表展开为多个个体的事件表"><i class="fa fa-check"></i>8.3将事件表展开为多个个体的事件表。</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#在采样窗口内添加给药和采样"><i class="fa fa-check"></i>8.4在采样窗口内添加给药和采样</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#组合事件表"><i class="fa fa-check"></i>8.5组合事件表</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#按序列组合事件表"><i class="fa fa-check"></i>8.6按序列组合事件表</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#通过对事件表重复组合事件表"><i class="fa fa-check"></i>8.7通过对事件表重复组合事件表</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#使用rbind组合事件表"><i class="fa fa-check"></i>8.8 使用rbind组合事件表</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#展开事件"><i class="fa fa-check"></i>8.9展开事件</a></li>
<li class="chapter" data-level="" data-path="第八章轻松创建rxode2事件.html"><a href="第八章轻松创建rxode2事件.html#rstudio笔记本中的事件表"><i class="fa fa-check"></i>8.10RStudio笔记本中的事件表</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第九章求解和求解选项.html"><a href="第九章求解和求解选项.html"><i class="fa fa-check"></i>第九章求解和求解选项</a>
<ul>
<li class="chapter" data-level="" data-path="第九章求解和求解选项.html"><a href="第九章求解和求解选项.html#一般的求解选项"><i class="fa fa-check"></i>9.1 一般的求解选项</a>
<ul>
<li class="chapter" data-level="" data-path="第九章求解和求解选项.html"><a href="第九章求解和求解选项.html#rxcontrol"><i class="fa fa-check"></i>9.1.1 rxControl</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html"><i class="fa fa-check"></i>第十章rxode2的输出</a>
<ul>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#使用rxode2数据框"><i class="fa fa-check"></i>10.1使用rxode2数据框</a>
<ul>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#创建交互式数据框"><i class="fa fa-check"></i>10.1.1创建交互式数据框</a></li>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#rxode2已求解对象的属性"><i class="fa fa-check"></i>10.1.2rxode2已求解对象的属性</a></li>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#使用已求解的对象作为简单的数据帧"><i class="fa fa-check"></i>10.1.3使用已求解的对象作为简单的数据帧</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#交互式更新数据集"><i class="fa fa-check"></i>10.2交互式更新数据集</a>
<ul>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#修改初始条件"><i class="fa fa-check"></i>10.2.1修改初始条件</a></li>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#修改rxode2的观测时间"><i class="fa fa-check"></i>10.2.2修改rxode2的观测时间</a></li>
<li class="chapter" data-level="" data-path="第十章rxode2的输出.html"><a href="第十章rxode2的输出.html#修改仿真参数"><i class="fa fa-check"></i>10.2.3修改仿真参数</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html"><i class="fa fa-check"></i>第十一章模拟</a>
<ul>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#单一个体的求解"><i class="fa fa-check"></i>11.1单一个体的求解</a>
<ul>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#单一个体求解与多个个体求解的总结"><i class="fa fa-check"></i>11.1.1单一个体求解与多个个体求解的总结</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#使用rxode2进行群体模拟"><i class="fa fa-check"></i>11.2使用rxode2进行群体模拟</a>
<ul>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#使用rxode2模拟变异性"><i class="fa fa-check"></i>11.2.1使用rxode2模拟变异性</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#模拟临床试验"><i class="fa fa-check"></i>11.3模拟临床试验</a>
<ul>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#基于逆wishart相关性的模拟"><i class="fa fa-check"></i>11.3.1基于逆Wishart相关性的模拟</a></li>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#使用方差标准差标准误差进行模拟"><i class="fa fa-check"></i>11.3.2使用方差/标准差标准误差进行模拟</a></li>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#omega或sigma参数没有不确定性的进行模拟"><i class="fa fa-check"></i>11.3.3<code>omega</code>或<code>sigma</code>参数没有不确定性的进行模拟</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十一章模拟.html"><a href="第十一章模拟.html#使用先验数据进行求解"><i class="fa fa-check"></i>11.4使用先验数据进行求解</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html"><i class="fa fa-check"></i>第十二章例子</a>
<ul>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#仅预测的模型"><i class="fa fa-check"></i>12.1仅预测的模型</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#已求解的房室模型"><i class="fa fa-check"></i>12.2已求解的房室模型</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#混合已求解的系统和odes"><i class="fa fa-check"></i>12.3混合已求解的系统和ODEs</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#基于体重的给药"><i class="fa fa-check"></i>12.4基于体重的给药</a>
<ul>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#在rxode2中创建2房室模型"><i class="fa fa-check"></i>12.4.1在rxode2中创建2房室模型</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#模拟协变量"><i class="fa fa-check"></i>12.4.2模拟协变量</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#创建基于体重的事件表"><i class="fa fa-check"></i>12.4.3创建基于体重的事件表</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#求解达托霉素的模拟"><i class="fa fa-check"></i>12.4.4求解达托霉素的模拟</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#达托霉素的参考文献"><i class="fa fa-check"></i>12.4.5达托霉素的参考文献</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#场景间和其他嵌套示例"><i class="fa fa-check"></i>12.5场景间和其他嵌套示例</a>
<ul>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#事件表"><i class="fa fa-check"></i>12.5.1事件表</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#rxode2模型"><i class="fa fa-check"></i>12.5.2rxode2模型</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#模型参数的不确定性"><i class="fa fa-check"></i>12.5.3模型参数的不确定性</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#嵌套变异性"><i class="fa fa-check"></i>12.5.4嵌套变异性</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#无法解释的变异"><i class="fa fa-check"></i>12.5.5无法解释的变异</a></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#求解问题"><i class="fa fa-check"></i>12.5.6求解问题</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十二章例子.html"><a href="第十二章例子.html#转移室模型"><i class="fa fa-check"></i>12.6转移室模型</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html"><i class="fa fa-check"></i>第十三章高级和其他主题</a>
<ul>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#rxode2中的协变量"><i class="fa fa-check"></i>13.1rxode2中的协变量</a>
<ul>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#个体的协变量"><i class="fa fa-check"></i>13.1.1个体的协变量</a></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#随时间变化的协变量"><i class="fa fa-check"></i>13.1.2随时间变化的协变量</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#shiny与rxode2"><i class="fa fa-check"></i>13.2Shiny与rxode2</a>
<ul>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#制作r-shiny应用的工具"><i class="fa fa-check"></i>13.2.1制作R Shiny应用的工具</a></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#使用shiny以图形方式探索参数拟合"><i class="fa fa-check"></i>13.2.2使用shiny以图形方式探索参数拟合</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#将rxode2与管道一起使用"><i class="fa fa-check"></i>13.3将rxode2与管道一起使用</a>
<ul>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#为管道设置rxode2模型"><i class="fa fa-check"></i>13.3.1为管道设置rxode2模型</a></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#模拟一个事件表"><i class="fa fa-check"></i>13.3.2模拟一个事件表</a></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#从单个事件表模拟多个个体"><i class="fa fa-check"></i>13.3.3从单个事件表模拟多个个体</a></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#总结模拟的输出"><i class="fa fa-check"></i>13.3.4总结模拟的输出</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#加速rxode2"><i class="fa fa-check"></i>13.4加速rxode2</a>
<ul>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#通过多个个体并行求解提高rxode2速度"><i class="fa fa-check"></i>13.4.1通过多个个体并行求解提高rxode2速度</a></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#一个现实生活中的例子"><i class="fa fa-check"></i>13.4.2一个现实生活中的例子</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#在您的包中集成rxode2模型"><i class="fa fa-check"></i>13.5在您的包中集成rxode2模型</a>
<ul>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#在包中使用预编译模型"><i class="fa fa-check"></i>13.5.1在包中使用预编译模型</a></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#在现有r添加包中使用模型"><i class="fa fa-check"></i>13.5.2在现有R添加包中使用模型</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="第十三章高级和其他主题.html"><a href="第十三章高级和其他主题.html#具有雅可比规范的刚性ode"><i class="fa fa-check"></i>13.6具有雅可比规范的刚性ODE</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="第八章轻松创建rxode2事件" class="section level1 hasAnchor">
<h1>第八章轻松创建rxode2事件<a href="第八章轻松创建rxode2事件.html#第八章轻松创建rxode2事件" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>rxode2中的事件表是一个专门的数据框，充当rxode2的所有事件和观测时间的容器。</p>
<p>要创建rxode2事件表，可以使用代码<code>eventTable()</code>， <code>et()</code>，甚至可以自己直接使用数据框创建事件表，自己直接使用数据框创建事件表时应确保其中包含正确事件信息。这与<a href="https://nlmixr2.github.io/rxode2-manual/events.html#events">rxode2支持的事件类型</a>密切相关。</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="第八章轻松创建rxode2事件.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rxode2)</span>
<span id="cb86-2"><a href="第八章轻松创建rxode2事件.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(units)</span></code></pre></div>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="第八章轻松创建rxode2事件.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; udunits database from /usr/share/xml/udunits/udunits2.xml</span></span></code></pre></div>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="第八章轻松创建rxode2事件.html#cb88-1" aria-hidden="true" tabindex="-1"></a>(ev <span class="ot">&lt;-</span> <span class="fu">eventTable</span>())</span></code></pre></div>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="第八章轻松创建rxode2事件.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 0 records ──</span></span>
<span id="cb89-2"><a href="第八章轻松创建rxode2事件.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb89-3"><a href="第八章轻松创建rxode2事件.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb89-4"><a href="第八章轻松创建rxode2事件.html#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb89-5"><a href="第八章轻松创建rxode2事件.html#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span></code></pre></div>
<p>或者</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="第八章轻松创建rxode2事件.html#cb90-1" aria-hidden="true" tabindex="-1"></a>(ev <span class="ot">&lt;-</span> <span class="fu">et</span>())</span></code></pre></div>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="第八章轻松创建rxode2事件.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 0 records ──</span></span>
<span id="cb91-2"><a href="第八章轻松创建rxode2事件.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb91-3"><a href="第八章轻松创建rxode2事件.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb91-4"><a href="第八章轻松创建rxode2事件.html#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb91-5"><a href="第八章轻松创建rxode2事件.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span></code></pre></div>
<p>使用此事件表，您可以通过管道或直接访问此事件表向其中添加采样/观测或给药记录。</p>
<p>下表列出了用于创建给药记录的两个主要函数</p>
<table>
<thead>
<tr class="header">
<th>add.dosing()函数</th>
<th>et()函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dose</td>
<td>amt</td>
<td>给药的药量</td>
</tr>
<tr class="even">
<td>nbr.doses</td>
<td>addl</td>
<td>额外附加的给药次数</td>
</tr>
<tr class="odd">
<td>dosing.interval</td>
<td>ii</td>
<td>给药间隔</td>
</tr>
<tr class="even">
<td>dosing.to</td>
<td>cmt</td>
<td>给药房室</td>
</tr>
<tr class="odd">
<td>rate</td>
<td>rate</td>
<td>输注速率</td>
</tr>
<tr class="even">
<td>start.time</td>
<td>time</td>
<td>给药开始时间</td>
</tr>
<tr class="odd">
<td></td>
<td>dur</td>
<td>输注持续是擦汗给你</td>
</tr>
</tbody>
</table>
<p>采样时间可以通过<code>add.sampling(采样时间)</code>或 <code>et(采样时间)</code>添加。<a href="https://nlmixr2.github.io/rxode2-manual/et.html#add-doses-and-samples-within-a-sampling-window">给药时间窗和采样时间窗</a>也是支持。</p>
<p>对于这些模型，我们可以使用rxode2教程中分享的模型来说明：</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="第八章轻松创建rxode2事件.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Model from rxode2 tutorial</span></span>
<span id="cb92-2"><a href="第八章轻松创建rxode2事件.html#cb92-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span><span class="fu">rxode2</span>({</span>
<span id="cb92-3"><a href="第八章轻松创建rxode2事件.html#cb92-3" aria-hidden="true" tabindex="-1"></a>    KA<span class="ot">=</span><span class="fl">2.94E-01</span>;</span>
<span id="cb92-4"><a href="第八章轻松创建rxode2事件.html#cb92-4" aria-hidden="true" tabindex="-1"></a>    CL<span class="ot">=</span><span class="fl">1.86E+01</span>;</span>
<span id="cb92-5"><a href="第八章轻松创建rxode2事件.html#cb92-5" aria-hidden="true" tabindex="-1"></a>    V2<span class="ot">=</span><span class="fl">4.02E+01</span>;</span>
<span id="cb92-6"><a href="第八章轻松创建rxode2事件.html#cb92-6" aria-hidden="true" tabindex="-1"></a>    Q<span class="ot">=</span><span class="fl">1.05E+01</span>;</span>
<span id="cb92-7"><a href="第八章轻松创建rxode2事件.html#cb92-7" aria-hidden="true" tabindex="-1"></a>    V3<span class="ot">=</span><span class="fl">2.97E+02</span>;</span>
<span id="cb92-8"><a href="第八章轻松创建rxode2事件.html#cb92-8" aria-hidden="true" tabindex="-1"></a>    Kin<span class="ot">=</span><span class="dv">1</span>;</span>
<span id="cb92-9"><a href="第八章轻松创建rxode2事件.html#cb92-9" aria-hidden="true" tabindex="-1"></a>    Kout<span class="ot">=</span><span class="dv">1</span>;</span>
<span id="cb92-10"><a href="第八章轻松创建rxode2事件.html#cb92-10" aria-hidden="true" tabindex="-1"></a>    EC50<span class="ot">=</span><span class="dv">200</span>;</span>
<span id="cb92-11"><a href="第八章轻松创建rxode2事件.html#cb92-11" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Added modeled bioavaiblity, duration and rate</span></span>
<span id="cb92-12"><a href="第八章轻松创建rxode2事件.html#cb92-12" aria-hidden="true" tabindex="-1"></a>    fdepot <span class="ot">=</span> <span class="dv">1</span>;</span>
<span id="cb92-13"><a href="第八章轻松创建rxode2事件.html#cb92-13" aria-hidden="true" tabindex="-1"></a>    durDepot <span class="ot">=</span> <span class="dv">8</span>;</span>
<span id="cb92-14"><a href="第八章轻松创建rxode2事件.html#cb92-14" aria-hidden="true" tabindex="-1"></a>    rateDepot <span class="ot">=</span> <span class="dv">1250</span>;</span>
<span id="cb92-15"><a href="第八章轻松创建rxode2事件.html#cb92-15" aria-hidden="true" tabindex="-1"></a>    C2 <span class="ot">=</span> centr<span class="sc">/</span>V2;</span>
<span id="cb92-16"><a href="第八章轻松创建rxode2事件.html#cb92-16" aria-hidden="true" tabindex="-1"></a>    C3 <span class="ot">=</span> peri<span class="sc">/</span>V3;</span>
<span id="cb92-17"><a href="第八章轻松创建rxode2事件.html#cb92-17" aria-hidden="true" tabindex="-1"></a>    d<span class="sc">/</span><span class="fu">dt</span>(depot) <span class="ot">=</span><span class="sc">-</span>KA<span class="sc">*</span>depot;</span>
<span id="cb92-18"><a href="第八章轻松创建rxode2事件.html#cb92-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">f</span>(depot) <span class="ot">=</span> fdepot</span>
<span id="cb92-19"><a href="第八章轻松创建rxode2事件.html#cb92-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dur</span>(depot) <span class="ot">=</span> durDepot</span>
<span id="cb92-20"><a href="第八章轻松创建rxode2事件.html#cb92-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rate</span>(depot) <span class="ot">=</span> rateDepot</span>
<span id="cb92-21"><a href="第八章轻松创建rxode2事件.html#cb92-21" aria-hidden="true" tabindex="-1"></a>    d<span class="sc">/</span><span class="fu">dt</span>(centr) <span class="ot">=</span> KA<span class="sc">*</span>depot <span class="sc">-</span> CL<span class="sc">*</span>C2 <span class="sc">-</span> Q<span class="sc">*</span>C2 <span class="sc">+</span> Q<span class="sc">*</span>C3;</span>
<span id="cb92-22"><a href="第八章轻松创建rxode2事件.html#cb92-22" aria-hidden="true" tabindex="-1"></a>    d<span class="sc">/</span><span class="fu">dt</span>(peri)  <span class="ot">=</span>                    Q<span class="sc">*</span>C2 <span class="sc">-</span> Q<span class="sc">*</span>C3;</span>
<span id="cb92-23"><a href="第八章轻松创建rxode2事件.html#cb92-23" aria-hidden="true" tabindex="-1"></a>    d<span class="sc">/</span><span class="fu">dt</span>(eff)  <span class="ot">=</span> Kin <span class="sc">-</span> Kout<span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>C2<span class="sc">/</span>(EC50<span class="sc">+</span>C2))<span class="sc">*</span>eff;</span>
<span id="cb92-24"><a href="第八章轻松创建rxode2事件.html#cb92-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">eff</span>(<span class="dv">0</span>) <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb92-25"><a href="第八章轻松创建rxode2事件.html#cb92-25" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<div id="向事件表添加给药" class="section level2 hasAnchor">
<h2>8.1向事件表添加给药<a href="第八章轻松创建rxode2事件.html#向事件表添加给药" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>事件表一旦创建，您就可以通过<code>add.dosing()</code>和<code>et()</code>函数将给药添加到事件表 。</p>
<p>使用 <code>add.dosing()</code>函数时您需要:</p>
<table>
<thead>
<tr class="header">
<th>所需的参数</th>
<th>含义用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dose</td>
<td>给药的药量</td>
</tr>
<tr class="even">
<td>nbr.doses</td>
<td>给药次数;至少是1.</td>
</tr>
<tr class="odd">
<td>dosing.interval</td>
<td>给药间隔;默认为24.</td>
</tr>
<tr class="even">
<td>dosing.to</td>
<td>给药的房室.</td>
</tr>
<tr class="odd">
<td>rate</td>
<td>输注速率</td>
</tr>
<tr class="even">
<td>start.time</td>
<td>给药开始的时间</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="第八章轻松创建rxode2事件.html#cb93-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">eventTable</span>(<span class="at">amount.units=</span><span class="st">&quot;mg&quot;</span>, <span class="at">time.units=</span><span class="st">&quot;hr&quot;</span>)</span>
<span id="cb93-2"><a href="第八章轻松创建rxode2事件.html#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="第八章轻松创建rxode2事件.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="do">## The methods ar attached to the event table, so you can use </span></span>
<span id="cb93-4"><a href="第八章轻松创建rxode2事件.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="do">## them directly</span></span>
<span id="cb93-5"><a href="第八章轻松创建rxode2事件.html#cb93-5" aria-hidden="true" tabindex="-1"></a>ev<span class="sc">$</span><span class="fu">add.dosing</span>(<span class="at">dose=</span><span class="dv">10000</span>, <span class="at">nbr.doses =</span> <span class="dv">3</span>)<span class="co"># loading doses</span></span>
<span id="cb93-6"><a href="第八章轻松创建rxode2事件.html#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Starts at time 0; Default dosing interval is 24</span></span>
<span id="cb93-7"><a href="第八章轻松创建rxode2事件.html#cb93-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-8"><a href="第八章轻松创建rxode2事件.html#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="do">## You can also pipe the event tables to these methods.</span></span>
<span id="cb93-9"><a href="第八章轻松创建rxode2事件.html#cb93-9" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> ev <span class="sc">%&gt;%</span></span>
<span id="cb93-10"><a href="第八章轻松创建rxode2事件.html#cb93-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add.dosing</span>(<span class="at">dose=</span><span class="dv">5000</span>, <span class="at">nbr.doses=</span><span class="dv">14</span>,</span>
<span id="cb93-11"><a href="第八章轻松创建rxode2事件.html#cb93-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">dosing.interval=</span><span class="dv">12</span>)<span class="co"># maintenance</span></span>
<span id="cb93-12"><a href="第八章轻松创建rxode2事件.html#cb93-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-13"><a href="第八章轻松创建rxode2事件.html#cb93-13" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="第八章轻松创建rxode2事件.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 2 records ──</span></span>
<span id="cb94-2"><a href="第八章轻松创建rxode2事件.html#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb94-3"><a href="第八章轻松创建rxode2事件.html#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb94-4"><a href="第八章轻松创建rxode2事件.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb94-5"><a href="第八章轻松创建rxode2事件.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb94-6"><a href="第八章轻松创建rxode2事件.html#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiple doses in `addl` columns, expand with x$expand();</span></span>
<span id="cb94-7"><a href="第八章轻松创建rxode2事件.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or etExpand(x)</span></span>
<span id="cb94-8"><a href="第八章轻松创建rxode2事件.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb94-9"><a href="第八章轻松创建rxode2事件.html#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span id="cb94-10"><a href="第八章轻松创建rxode2事件.html#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time   amt  ii  addl evid        </span></span>
<span id="cb94-11"><a href="第八章轻松创建rxode2事件.html#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    [h]  [mg] [h] &lt;int&gt; &lt;evid&gt;      </span></span>
<span id="cb94-12"><a href="第八章轻松创建rxode2事件.html#cb94-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0 10000  24     2 1:Dose (Add)</span></span>
<span id="cb94-13"><a href="第八章轻松创建rxode2事件.html#cb94-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    0  5000  12    13 1:Dose (Add)</span></span></code></pre></div>
<p>请注意，单位已在表中指定。指定后，单位将使用<code>units</code>R添加包追踪单位，并在需要时进行转换。此外，<code>ggforce</code>使用它们来标记 <code>ggplot</code>坐标轴。对设置和删除<code>rxode2</code>事件表的单位时可以使用<code>set_units</code>和<code>drop_units</code>函数。【译者注：我在自己本地环境，开始时无法实现原作者描述的对单位的修改，在重新R后，上述对单位的修改可以实现了，所以在新手初次尝试示例前最后重启一次R，以确保案例可重现】</p>
<p>在此示例中，您可以看到时间坐标轴标记出了单位：</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="第八章轻松创建rxode2事件.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, ev) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-75-1.png" /></p>
<p>如果您更熟悉NONMEM/rxode2事件记录，您还可以直接使用带有dose元素的<code>et</code>指定给药:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="第八章轻松创建rxode2事件.html#cb96-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="第八章轻松创建rxode2事件.html#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">10000</span>, <span class="at">until =</span> <span class="fu">set_units</span>(<span class="dv">3</span>, days),</span>
<span id="cb96-3"><a href="第八章轻松创建rxode2事件.html#cb96-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ii=</span><span class="dv">12</span>) <span class="co"># loading doses</span></span>
<span id="cb96-4"><a href="第八章轻松创建rxode2事件.html#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="第八章轻松创建rxode2事件.html#cb96-5" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="第八章轻松创建rxode2事件.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 1 records ──</span></span>
<span id="cb97-2"><a href="第八章轻松创建rxode2事件.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb97-3"><a href="第八章轻松创建rxode2事件.html#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb97-4"><a href="第八章轻松创建rxode2事件.html#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb97-5"><a href="第八章轻松创建rxode2事件.html#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb97-6"><a href="第八章轻松创建rxode2事件.html#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiple doses in `addl` columns, expand with x$expand();</span></span>
<span id="cb97-7"><a href="第八章轻松创建rxode2事件.html#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or etExpand(x)</span></span>
<span id="cb97-8"><a href="第八章轻松创建rxode2事件.html#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb97-9"><a href="第八章轻松创建rxode2事件.html#cb97-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span id="cb97-10"><a href="第八章轻松创建rxode2事件.html#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time   amt  ii  addl evid        </span></span>
<span id="cb97-11"><a href="第八章轻松创建rxode2事件.html#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    [h] &lt;dbl&gt; [h] &lt;int&gt; &lt;evid&gt;      </span></span>
<span id="cb97-12"><a href="第八章轻松创建rxode2事件.html#cb97-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0 10000  12     6 1:Dose (Add)</span></span></code></pre></div>
<p>其中给出：</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="第八章轻松创建rxode2事件.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, ev) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-77-1.png" /></p>
<p>这显示出了创建事件表是多么的容易。</p>
</div>
<div id="将采样添加到事件表" class="section level2 hasAnchor">
<h2>8.2 将采样添加到事件表<a href="第八章轻松创建rxode2事件.html#将采样添加到事件表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>上面的示例如果您注意看会发现，<code>rxode2</code>生成了一些默认的采样时间，这因为没有任何采样时间。如果希望对采样时间进行更多控制，则应通过<code>add.sampling</code>或<code>et</code>将采样添加到rxode2的事件表中</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="第八章轻松创建rxode2事件.html#cb99-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">eventTable</span>(<span class="at">amount.units=</span><span class="st">&quot;mg&quot;</span>, <span class="at">time.units=</span><span class="st">&quot;hr&quot;</span>)</span>
<span id="cb99-2"><a href="第八章轻松创建rxode2事件.html#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="第八章轻松创建rxode2事件.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="do">## The methods ar attached to the event table, so you can use them</span></span>
<span id="cb99-4"><a href="第八章轻松创建rxode2事件.html#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="do">## directly</span></span>
<span id="cb99-5"><a href="第八章轻松创建rxode2事件.html#cb99-5" aria-hidden="true" tabindex="-1"></a>ev<span class="sc">$</span><span class="fu">add.dosing</span>(<span class="at">dose=</span><span class="dv">10000</span>, <span class="at">nbr.doses =</span> <span class="dv">3</span>)<span class="co"># loading doses</span></span>
<span id="cb99-6"><a href="第八章轻松创建rxode2事件.html#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="第八章轻松创建rxode2事件.html#cb99-7" aria-hidden="true" tabindex="-1"></a>ev<span class="sc">$</span><span class="fu">add.sampling</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">24</span>,<span class="at">by=</span><span class="dv">4</span>))</span>
<span id="cb99-8"><a href="第八章轻松创建rxode2事件.html#cb99-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-9"><a href="第八章轻松创建rxode2事件.html#cb99-9" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="第八章轻松创建rxode2事件.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 8 records ──</span></span>
<span id="cb100-2"><a href="第八章轻松创建rxode2事件.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb100-3"><a href="第八章轻松创建rxode2事件.html#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb100-4"><a href="第八章轻松创建rxode2事件.html#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 observation times (see x$get.sampling(); add with</span></span>
<span id="cb100-5"><a href="第八章轻松创建rxode2事件.html#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb100-6"><a href="第八章轻松创建rxode2事件.html#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiple doses in `addl` columns, expand with x$expand();</span></span>
<span id="cb100-7"><a href="第八章轻松创建rxode2事件.html#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or etExpand(x)</span></span>
<span id="cb100-8"><a href="第八章轻松创建rxode2事件.html#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb100-9"><a href="第八章轻松创建rxode2事件.html#cb100-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8 × 5</span></span>
<span id="cb100-10"><a href="第八章轻松创建rxode2事件.html#cb100-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time   amt  ii  addl evid         </span></span>
<span id="cb100-11"><a href="第八章轻松创建rxode2事件.html#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    [h]  [mg] [h] &lt;int&gt; &lt;evid&gt;       </span></span>
<span id="cb100-12"><a href="第八章轻松创建rxode2事件.html#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0    NA  NA    NA 0:Observation</span></span>
<span id="cb100-13"><a href="第八章轻松创建rxode2事件.html#cb100-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    0 10000  24     2 1:Dose (Add) </span></span>
<span id="cb100-14"><a href="第八章轻松创建rxode2事件.html#cb100-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    4    NA  NA    NA 0:Observation</span></span>
<span id="cb100-15"><a href="第八章轻松创建rxode2事件.html#cb100-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    8    NA  NA    NA 0:Observation</span></span>
<span id="cb100-16"><a href="第八章轻松创建rxode2事件.html#cb100-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   12    NA  NA    NA 0:Observation</span></span>
<span id="cb100-17"><a href="第八章轻松创建rxode2事件.html#cb100-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   16    NA  NA    NA 0:Observation</span></span>
<span id="cb100-18"><a href="第八章轻松创建rxode2事件.html#cb100-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   20    NA  NA    NA 0:Observation</span></span>
<span id="cb100-19"><a href="第八章轻松创建rxode2事件.html#cb100-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   24    NA  NA    NA 0:Observation</span></span></code></pre></div>
<p>上述代码将给出：</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="第八章轻松创建rxode2事件.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(m1, ev) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-79-1.png" /></p>
<p>或者，如果您也可以使用<code>et</code>，您可以简单地以与<code>add.sampling</code>类似的方式添加它们：</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="第八章轻松创建rxode2事件.html#cb102-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-2"><a href="第八章轻松创建rxode2事件.html#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">10000</span>, <span class="at">until =</span> <span class="fu">set_units</span>(<span class="dv">3</span>, days),</span>
<span id="cb102-3"><a href="第八章轻松创建rxode2事件.html#cb102-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ii=</span><span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="co"># loading doses</span></span>
<span id="cb102-4"><a href="第八章轻松创建rxode2事件.html#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">24</span>,<span class="at">by=</span><span class="dv">4</span>))</span>
<span id="cb102-5"><a href="第八章轻松创建rxode2事件.html#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="第八章轻松创建rxode2事件.html#cb102-6" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="第八章轻松创建rxode2事件.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 8 records ──</span></span>
<span id="cb103-2"><a href="第八章轻松创建rxode2事件.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb103-3"><a href="第八章轻松创建rxode2事件.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb103-4"><a href="第八章轻松创建rxode2事件.html#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 observation times (see x$get.sampling(); add with</span></span>
<span id="cb103-5"><a href="第八章轻松创建rxode2事件.html#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb103-6"><a href="第八章轻松创建rxode2事件.html#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiple doses in `addl` columns, expand with x$expand();</span></span>
<span id="cb103-7"><a href="第八章轻松创建rxode2事件.html#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or etExpand(x)</span></span>
<span id="cb103-8"><a href="第八章轻松创建rxode2事件.html#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb103-9"><a href="第八章轻松创建rxode2事件.html#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8 × 5</span></span>
<span id="cb103-10"><a href="第八章轻松创建rxode2事件.html#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time   amt  ii  addl evid         </span></span>
<span id="cb103-11"><a href="第八章轻松创建rxode2事件.html#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    [h] &lt;dbl&gt; [h] &lt;int&gt; &lt;evid&gt;       </span></span>
<span id="cb103-12"><a href="第八章轻松创建rxode2事件.html#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    0    NA  NA    NA 0:Observation</span></span>
<span id="cb103-13"><a href="第八章轻松创建rxode2事件.html#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    0 10000  12     6 1:Dose (Add) </span></span>
<span id="cb103-14"><a href="第八章轻松创建rxode2事件.html#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    4    NA  NA    NA 0:Observation</span></span>
<span id="cb103-15"><a href="第八章轻松创建rxode2事件.html#cb103-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    8    NA  NA    NA 0:Observation</span></span>
<span id="cb103-16"><a href="第八章轻松创建rxode2事件.html#cb103-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   12    NA  NA    NA 0:Observation</span></span>
<span id="cb103-17"><a href="第八章轻松创建rxode2事件.html#cb103-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   16    NA  NA    NA 0:Observation</span></span>
<span id="cb103-18"><a href="第八章轻松创建rxode2事件.html#cb103-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   20    NA  NA    NA 0:Observation</span></span>
<span id="cb103-19"><a href="第八章轻松创建rxode2事件.html#cb103-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   24    NA  NA    NA 0:Observation</span></span></code></pre></div>
<p>rxode2求解后上述代码将给出以下：</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="第八章轻松创建rxode2事件.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(m1, ev) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-81-1.png" /></p>
<p>请注意这些图的锯齿状性质，这是因为仅有几个采样时间。</p>
</div>
<div id="将事件表展开为多个个体的事件表" class="section level2 hasAnchor">
<h2>8.3将事件表展开为多个个体的事件表。<a href="第八章轻松创建rxode2事件.html#将事件表展开为多个个体的事件表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>展开事件表唯一需要的是要展开的ID列表；</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="第八章轻松创建rxode2事件.html#cb105-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-2"><a href="第八章轻松创建rxode2事件.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">10000</span>, <span class="at">until =</span> <span class="fu">set_units</span>(<span class="dv">3</span>, days),</span>
<span id="cb105-3"><a href="第八章轻松创建rxode2事件.html#cb105-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ii=</span><span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="co"># loading doses</span></span>
<span id="cb105-4"><a href="第八章轻松创建rxode2事件.html#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">48</span>,<span class="at">length.out=</span><span class="dv">200</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb105-5"><a href="第八章轻松创建rxode2事件.html#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb105-6"><a href="第八章轻松创建rxode2事件.html#cb105-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-7"><a href="第八章轻松创建rxode2事件.html#cb105-7" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="第八章轻松创建rxode2事件.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 804 records ──</span></span>
<span id="cb106-2"><a href="第八章轻松创建rxode2事件.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb106-3"><a href="第八章轻松创建rxode2事件.html#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb106-4"><a href="第八章轻松创建rxode2事件.html#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 800 observation times (see x$get.sampling(); add with</span></span>
<span id="cb106-5"><a href="第八章轻松创建rxode2事件.html#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb106-6"><a href="第八章轻松创建rxode2事件.html#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiple doses in `addl` columns, expand with x$expand();</span></span>
<span id="cb106-7"><a href="第八章轻松创建rxode2事件.html#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or etExpand(x)</span></span>
<span id="cb106-8"><a href="第八章轻松创建rxode2事件.html#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb106-9"><a href="第八章轻松创建rxode2事件.html#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 804 × 6</span></span>
<span id="cb106-10"><a href="第八章轻松创建rxode2事件.html#cb106-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       id  time   amt  ii  addl evid         </span></span>
<span id="cb106-11"><a href="第八章轻松创建rxode2事件.html#cb106-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;int&gt;   [h] &lt;dbl&gt; [h] &lt;int&gt; &lt;evid&gt;       </span></span>
<span id="cb106-12"><a href="第八章轻松创建rxode2事件.html#cb106-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     1 0        NA  NA    NA 0:Observation</span></span>
<span id="cb106-13"><a href="第八章轻松创建rxode2事件.html#cb106-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     1 0     10000  12     6 1:Dose (Add) </span></span>
<span id="cb106-14"><a href="第八章轻松创建rxode2事件.html#cb106-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     1 0.241    NA  NA    NA 0:Observation</span></span>
<span id="cb106-15"><a href="第八章轻松创建rxode2事件.html#cb106-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     1 0.482    NA  NA    NA 0:Observation</span></span>
<span id="cb106-16"><a href="第八章轻松创建rxode2事件.html#cb106-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     1 0.724    NA  NA    NA 0:Observation</span></span>
<span id="cb106-17"><a href="第八章轻松创建rxode2事件.html#cb106-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     1 0.965    NA  NA    NA 0:Observation</span></span>
<span id="cb106-18"><a href="第八章轻松创建rxode2事件.html#cb106-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     1 1.21     NA  NA    NA 0:Observation</span></span>
<span id="cb106-19"><a href="第八章轻松创建rxode2事件.html#cb106-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     1 1.45     NA  NA    NA 0:Observation</span></span>
<span id="cb106-20"><a href="第八章轻松创建rxode2事件.html#cb106-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     1 1.69     NA  NA    NA 0:Observation</span></span>
<span id="cb106-21"><a href="第八章轻松创建rxode2事件.html#cb106-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     1 1.93     NA  NA    NA 0:Observation</span></span>
<span id="cb106-22"><a href="第八章轻松创建rxode2事件.html#cb106-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 794 more rows</span></span></code></pre></div>
<p>您可以在以下模拟中看到有4个个体被求解：</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="第八章轻松创建rxode2事件.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb107-2"><a href="第八章轻松创建rxode2事件.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSetSeed</span>(<span class="dv">42</span>)</span>
<span id="cb107-3"><a href="第八章轻松创建rxode2事件.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(m1, ev,</span>
<span id="cb107-4"><a href="第八章轻松创建rxode2事件.html#cb107-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">params=</span><span class="fu">data.frame</span>(<span class="at">KA=</span><span class="fl">0.294</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)),</span>
<span id="cb107-5"><a href="第八章轻松创建rxode2事件.html#cb107-5" aria-hidden="true" tabindex="-1"></a>                        <span class="fl">18.6</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb107-6"><a href="第八章轻松创建rxode2事件.html#cb107-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-83-1.png" /></p>
</div>
<div id="在采样窗口内添加给药和采样" class="section level2 hasAnchor">
<h2>8.4在采样窗口内添加给药和采样<a href="第八章轻松创建rxode2事件.html#在采样窗口内添加给药和采样" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>除了添加固定给药和固定采样时间之外，您还可以设置采样和给药的时间窗口。对于给药时间窗，您可以在time参数(时间参数)中指定，此时将time指定为一个list列表，该list中包含有一个有序数字向量，向量中含有两个元素，分别表示给药时间的下限和给药时间窗的上限【译者注：比如time=list(c(0,6))，当于计划给药时间为t时，此时的时间窗为[t+0,t+6]】。</p>
<p>对于给药时间窗的示例，您从给药时间的给药时间窗为6小时的示例开始，示例如下：</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="第八章轻松创建rxode2事件.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb108-2"><a href="第八章轻松创建rxode2事件.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSetSeed</span>(<span class="dv">42</span>)</span>
<span id="cb108-3"><a href="第八章轻松创建rxode2事件.html#cb108-3" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb108-4"><a href="第八章轻松创建rxode2事件.html#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">time=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">6</span>)), <span class="at">amt=</span><span class="dv">10000</span>, <span class="at">until =</span> <span class="fu">set_units</span>(<span class="dv">2</span>, days),</span>
<span id="cb108-5"><a href="第八章轻松创建rxode2事件.html#cb108-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ii=</span><span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="co"># loading doses</span></span>
<span id="cb108-6"><a href="第八章轻松创建rxode2事件.html#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb108-7"><a href="第八章轻松创建rxode2事件.html#cb108-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-8"><a href="第八章轻松创建rxode2事件.html#cb108-8" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="第八章轻松创建rxode2事件.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 16 records ──</span></span>
<span id="cb109-2"><a href="第八章轻松创建rxode2事件.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb109-3"><a href="第八章轻松创建rxode2事件.html#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb109-4"><a href="第八章轻松创建rxode2事件.html#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb109-5"><a href="第八章轻松创建rxode2事件.html#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb109-6"><a href="第八章轻松创建rxode2事件.html#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb109-7"><a href="第八章轻松创建rxode2事件.html#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 16 × 6</span></span>
<span id="cb109-8"><a href="第八章轻松创建rxode2事件.html#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       id low   time high   amt evid        </span></span>
<span id="cb109-9"><a href="第八章轻松创建rxode2事件.html#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;int&gt; [h]    [h]  [h] &lt;dbl&gt; &lt;evid&gt;      </span></span>
<span id="cb109-10"><a href="第八章轻松创建rxode2事件.html#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     1   0  5.49     6 10000 1:Dose (Add)</span></span>
<span id="cb109-11"><a href="第八章轻松创建rxode2事件.html#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     1  12 17.0     18 10000 1:Dose (Add)</span></span>
<span id="cb109-12"><a href="第八章轻松创建rxode2事件.html#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     1  24 25.7     30 10000 1:Dose (Add)</span></span>
<span id="cb109-13"><a href="第八章轻松创建rxode2事件.html#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     1  36 41.6     42 10000 1:Dose (Add)</span></span>
<span id="cb109-14"><a href="第八章轻松创建rxode2事件.html#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     2   0  4.31     6 10000 1:Dose (Add)</span></span>
<span id="cb109-15"><a href="第八章轻松创建rxode2事件.html#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2  12 14.7     18 10000 1:Dose (Add)</span></span>
<span id="cb109-16"><a href="第八章轻松创建rxode2事件.html#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     2  24 28.2     30 10000 1:Dose (Add)</span></span>
<span id="cb109-17"><a href="第八章轻松创建rxode2事件.html#cb109-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     2  36 39.9     42 10000 1:Dose (Add)</span></span>
<span id="cb109-18"><a href="第八章轻松创建rxode2事件.html#cb109-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     3   0  0.808    6 10000 1:Dose (Add)</span></span>
<span id="cb109-19"><a href="第八章轻松创建rxode2事件.html#cb109-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     3  12 16.4     18 10000 1:Dose (Add)</span></span>
<span id="cb109-20"><a href="第八章轻松创建rxode2事件.html#cb109-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     3  24 27.1     30 10000 1:Dose (Add)</span></span>
<span id="cb109-21"><a href="第八章轻松创建rxode2事件.html#cb109-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12     3  36 39.9     42 10000 1:Dose (Add)</span></span>
<span id="cb109-22"><a href="第八章轻松创建rxode2事件.html#cb109-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13     4   0  4.98     6 10000 1:Dose (Add)</span></span>
<span id="cb109-23"><a href="第八章轻松创建rxode2事件.html#cb109-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14     4  12 13.7     18 10000 1:Dose (Add)</span></span>
<span id="cb109-24"><a href="第八章轻松创建rxode2事件.html#cb109-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15     4  24 29.6     30 10000 1:Dose (Add)</span></span>
<span id="cb109-25"><a href="第八章轻松创建rxode2事件.html#cb109-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16     4  36 41.5     42 10000 1:Dose (Add)</span></span></code></pre></div>
<p>在下面的模拟中，您可以清楚地看到不同的剂量时间窗：</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="第八章轻松创建rxode2事件.html#cb110-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> ev <span class="sc">%&gt;%</span> <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">48</span>,<span class="at">length.out=</span><span class="dv">200</span>))</span>
<span id="cb110-2"><a href="第八章轻松创建rxode2事件.html#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="第八章轻松创建rxode2事件.html#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(m1, ev,</span>
<span id="cb110-4"><a href="第八章轻松创建rxode2事件.html#cb110-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">params=</span><span class="fu">data.frame</span>(<span class="at">KA=</span><span class="fl">0.294</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)),</span>
<span id="cb110-5"><a href="第八章轻松创建rxode2事件.html#cb110-5" aria-hidden="true" tabindex="-1"></a>                        <span class="fl">18.6</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb110-6"><a href="第八章轻松创建rxode2事件.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-85-1.png" /></p>
<p>当然，在现实中，给药时间窗可能只有2小时：</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="第八章轻松创建rxode2事件.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb111-2"><a href="第八章轻松创建rxode2事件.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSetSeed</span>(<span class="dv">42</span>)</span>
<span id="cb111-3"><a href="第八章轻松创建rxode2事件.html#cb111-3" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-4"><a href="第八章轻松创建rxode2事件.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">time=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)), <span class="at">amt=</span><span class="dv">10000</span>, <span class="at">until =</span> <span class="fu">set_units</span>(<span class="dv">2</span>, days),</span>
<span id="cb111-5"><a href="第八章轻松创建rxode2事件.html#cb111-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ii=</span><span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="co"># loading doses</span></span>
<span id="cb111-6"><a href="第八章轻松创建rxode2事件.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-7"><a href="第八章轻松创建rxode2事件.html#cb111-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">48</span>,<span class="at">length.out=</span><span class="dv">200</span>))</span>
<span id="cb111-8"><a href="第八章轻松创建rxode2事件.html#cb111-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-9"><a href="第八章轻松创建rxode2事件.html#cb111-9" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(m1, ev,</span>
<span id="cb111-10"><a href="第八章轻松创建rxode2事件.html#cb111-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">params=</span><span class="fu">data.frame</span>(<span class="at">KA=</span><span class="fl">0.294</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)),</span>
<span id="cb111-11"><a href="第八章轻松创建rxode2事件.html#cb111-11" aria-hidden="true" tabindex="-1"></a>                        <span class="fl">18.6</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb111-12"><a href="第八章轻松创建rxode2事件.html#cb111-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-86-1.png" /></p>
<p>同样的事情可以用于指定采样的采样时间。要以采样时间窗的形式指定采样时间，您可以创建采样时间列表。其中的每个采样时间将是一个list列表，list中是一个含有两个元素的有序的数字向量。</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="第八章轻松创建rxode2事件.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSetSeed</span>(<span class="dv">42</span>)</span>
<span id="cb112-2"><a href="第八章轻松创建rxode2事件.html#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb112-3"><a href="第八章轻松创建rxode2事件.html#cb112-3" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-4"><a href="第八章轻松创建rxode2事件.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">time=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)), <span class="at">amt=</span><span class="dv">10000</span>, <span class="at">until =</span> <span class="fu">set_units</span>(<span class="dv">2</span>, days),</span>
<span id="cb112-5"><a href="第八章轻松创建rxode2事件.html#cb112-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ii=</span><span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="co"># loading doses</span></span>
<span id="cb112-6"><a href="第八章轻松创建rxode2事件.html#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb112-7"><a href="第八章轻松创建rxode2事件.html#cb112-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-8"><a href="第八章轻松创建rxode2事件.html#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Create 20 samples in the first 24 hours and 20 samples in the</span></span>
<span id="cb112-9"><a href="第八章轻松创建rxode2事件.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="do">## second 24 hours</span></span>
<span id="cb112-10"><a href="第八章轻松创建rxode2事件.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 在第一个24小时内，创建20个采样；在第二个24小时内，创建20个采</span></span>
<span id="cb112-11"><a href="第八章轻松创建rxode2事件.html#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 【译者注：即在第一个24小时内，随机20次采样，因为前个采样的时间窗都是[0,24]】</span></span>
<span id="cb112-12"><a href="第八章轻松创建rxode2事件.html#cb112-12" aria-hidden="true" tabindex="-1"></a>samples <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="cf">function</span>(...){<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">24</span>)}),</span>
<span id="cb112-13"><a href="第八章轻松创建rxode2事件.html#cb112-13" aria-hidden="true" tabindex="-1"></a>             <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="cf">function</span>(...){<span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">48</span>)}))</span>
<span id="cb112-14"><a href="第八章轻松创建rxode2事件.html#cb112-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-15"><a href="第八章轻松创建rxode2事件.html#cb112-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Add the random collection to the event table</span></span>
<span id="cb112-16"><a href="第八章轻松创建rxode2事件.html#cb112-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 将随机采样添加到事件表中</span></span>
<span id="cb112-17"><a href="第八章轻松创建rxode2事件.html#cb112-17" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> ev <span class="sc">%&gt;%</span> <span class="fu">et</span>(samples)</span>
<span id="cb112-18"><a href="第八章轻松创建rxode2事件.html#cb112-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-19"><a href="第八章轻松创建rxode2事件.html#cb112-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb112-20"><a href="第八章轻松创建rxode2事件.html#cb112-20" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(m1, ev, <span class="at">params=</span><span class="fu">data.frame</span>(<span class="at">KA=</span><span class="fl">0.294</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)),</span>
<span id="cb112-21"><a href="第八章轻松创建rxode2事件.html#cb112-21" aria-hidden="true" tabindex="-1"></a>                                <span class="fl">18.6</span><span class="sc">*</span><span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">4</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb112-22"><a href="第八章轻松创建rxode2事件.html#cb112-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(C2) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="assets/unnamed-chunk-87-1.png" /></p>
<p>这显示了rxode2事件表允许的给药和采样的灵活性。</p>
</div>
<div id="组合事件表" class="section level2 hasAnchor">
<h2>8.5组合事件表<a href="第八章轻松创建rxode2事件.html#组合事件表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>由于您可以创建给药记录和采样记录，因此您可以您创建任何您希望的复杂给药方案。此外，rxode2允许您通过<code>c</code>、<code>seq</code>、<code>rep</code>和<code>rbind</code>函数组合事件表。</p>
</div>
<div id="按序列组合事件表" class="section level2 hasAnchor">
<h2>8.6按序列组合事件表<a href="第八章轻松创建rxode2事件.html#按序列组合事件表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>组合事件表的一种方法是通过<code>c</code>、<code>seq</code>或 <code>etSeq</code>按序列进行组合。这需要两个给药组，并在它们之间加上至少一个给药间隔:：</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="第八章轻松创建rxode2事件.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="do">## bid for 5 days</span></span>
<span id="cb113-2"><a href="第八章轻松创建rxode2事件.html#cb113-2" aria-hidden="true" tabindex="-1"></a>bid <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb113-3"><a href="第八章轻松创建rxode2事件.html#cb113-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">10000</span>,<span class="at">ii=</span><span class="dv">12</span>,<span class="at">until=</span><span class="fu">set_units</span>(<span class="dv">5</span>, <span class="st">&quot;days&quot;</span>))</span>
<span id="cb113-4"><a href="第八章轻松创建rxode2事件.html#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="第八章轻松创建rxode2事件.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="do">## qd for 5 days</span></span>
<span id="cb113-6"><a href="第八章轻松创建rxode2事件.html#cb113-6" aria-hidden="true" tabindex="-1"></a>qd <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb113-7"><a href="第八章轻松创建rxode2事件.html#cb113-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">20000</span>,<span class="at">ii=</span><span class="dv">24</span>,<span class="at">until=</span><span class="fu">set_units</span>(<span class="dv">5</span>, <span class="st">&quot;days&quot;</span>))</span>
<span id="cb113-8"><a href="第八章轻松创建rxode2事件.html#cb113-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-9"><a href="第八章轻松创建rxode2事件.html#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="do">## bid for 5 days followed by qd for 5 days</span></span>
<span id="cb113-10"><a href="第八章轻松创建rxode2事件.html#cb113-10" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span> <span class="fu">seq</span>(bid,qd) <span class="sc">%&gt;%</span> <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">11</span><span class="sc">*</span><span class="dv">24</span>,<span class="at">length.out=</span><span class="dv">100</span>));</span>
<span id="cb113-11"><a href="第八章轻松创建rxode2事件.html#cb113-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-12"><a href="第八章轻松创建rxode2事件.html#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, et) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-88-1.png" /></p>
<p>在对事件按序列组合时，您还可以在此序列插入一段时间将前后两个分隔开;例如，如果你想以一周为间隔，你可以用下面的事件表序列轻松地做到这一点:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="第八章轻松创建rxode2事件.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="do">## bid for 5 days followed by qd for 5 days</span></span>
<span id="cb114-2"><a href="第八章轻松创建rxode2事件.html#cb114-2" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span> <span class="fu">seq</span>(bid,<span class="fu">set_units</span>(<span class="dv">1</span>, <span class="st">&quot;week&quot;</span>), qd) <span class="sc">%&gt;%</span></span>
<span id="cb114-3"><a href="第八章轻松创建rxode2事件.html#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">18</span><span class="sc">*</span><span class="dv">24</span>,<span class="at">length.out=</span><span class="dv">100</span>));</span>
<span id="cb114-4"><a href="第八章轻松创建rxode2事件.html#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="第八章轻松创建rxode2事件.html#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, et) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-89-1.png" /></p>
<p>请注意，在本例中，bid和qd事件表之间的时间正好是一周，而不是一周加24小时，因为存在给药间隔时间。如果你想要这种行为，你可以在按序列组合时使用<code>wait="+ii"</code>。【译者注：不要怀疑你没有看懂，因为我在本地测试，发现添加wait=“+ii”后毫无变化，无论在两个事件表格间插入1还是插入13，都无变化，怀疑是一个bug；因为是否使用wait=“+ii”，其行为都与默认的samrt方式一样】</p>
<pre><code>## bid for 5 days followed by qd for 5 days
et &lt;- seq(bid,set_units(1, &quot;week&quot;), qd,wait=&quot;+ii&quot;) %&gt;%
    et(seq(0,18*24,length.out=100));

rxSolve(m1, et) %&gt;% plot(C2)</code></pre>
<p><img src="assets/unnamed-chunk-90-1.png" /></p>
<p>还要注意的是，rxode2假定您希望按照给药来分隔事件表，并在组合事件表时清除所有采样记录。如果不是这样，您还可以使用选项<code>samples="use"</code></p>
</div>
<div id="通过对事件表重复组合事件表" class="section level2 hasAnchor">
<h2>8.7通过对事件表重复组合事件表<a href="第八章轻松创建rxode2事件.html#通过对事件表重复组合事件表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>您可以使用<code>etRep</code>或<code>rep</code>重复事件表。 例如，可以为期2周的QD治疗和1周的休息治疗为一轮，一共重复4论，这样的治疗方案可以简单地指定出来：</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="第八章轻松创建rxode2事件.html#cb116-1" aria-hidden="true" tabindex="-1"></a>qd <span class="ot">&lt;-</span><span class="fu">et</span>(<span class="at">timeUnits =</span> <span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="第八章轻松创建rxode2事件.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">10000</span>, <span class="at">ii=</span><span class="dv">24</span>, <span class="at">until=</span><span class="fu">set_units</span>(<span class="dv">2</span>, <span class="st">&quot;weeks&quot;</span>), <span class="at">cmt=</span><span class="st">&quot;depot&quot;</span>)</span>
<span id="cb116-3"><a href="第八章轻松创建rxode2事件.html#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="第八章轻松创建rxode2事件.html#cb116-4" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span> <span class="fu">rep</span>(qd, <span class="at">times=</span><span class="dv">4</span>, <span class="at">wait=</span><span class="fu">set_units</span>(<span class="dv">1</span>,<span class="st">&quot;weeks&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb116-5"><a href="第八章轻松创建rxode2事件.html#cb116-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add.sampling</span>(<span class="fu">set_units</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">12.5</span>,<span class="at">by=</span><span class="fl">0.005</span>),weeks))</span>
<span id="cb116-6"><a href="第八章轻松创建rxode2事件.html#cb116-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-7"><a href="第八章轻松创建rxode2事件.html#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, et)  <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-91-1.png" /></p>
<p>这是使用事件表按序列组合的一种简化方法。 因此，许多相同的选项仍然适用；也就是说，除非使用<code>samples="use"</code>，否则<code>samples</code>将被清除，事件表之间的时间至少是给药间隔。你可以通过<code>wait</code>选项来调整时间 。</p>
</div>
<div id="使用rbind组合事件表" class="section level2 hasAnchor">
<h2>8.8 使用rbind组合事件表<a href="第八章轻松创建rxode2事件.html#使用rbind组合事件表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>您可以将事件表与<code>rbind</code>结合使用。这在组合事件表时不考虑事件的时间，而是保持它们相同的时间。如果你用等待时间间隔事件表，则它再不考虑给药间隔。</p>
<p>使用前面的<code>seq</code>，您可以清楚地看到他们两个之间的差异。以下是采用按序列组合时间表:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="第八章轻松创建rxode2事件.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="do">## bid for 5 days</span></span>
<span id="cb117-2"><a href="第八章轻松创建rxode2事件.html#cb117-2" aria-hidden="true" tabindex="-1"></a>bid <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb117-3"><a href="第八章轻松创建rxode2事件.html#cb117-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">10000</span>,<span class="at">ii=</span><span class="dv">12</span>,<span class="at">until=</span><span class="fu">set_units</span>(<span class="dv">5</span>, <span class="st">&quot;days&quot;</span>))</span>
<span id="cb117-4"><a href="第八章轻松创建rxode2事件.html#cb117-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-5"><a href="第八章轻松创建rxode2事件.html#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="do">## qd for 5 days</span></span>
<span id="cb117-6"><a href="第八章轻松创建rxode2事件.html#cb117-6" aria-hidden="true" tabindex="-1"></a>qd <span class="ot">&lt;-</span> <span class="fu">et</span>(<span class="at">timeUnits=</span><span class="st">&quot;hr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb117-7"><a href="第八章轻松创建rxode2事件.html#cb117-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">et</span>(<span class="at">amt=</span><span class="dv">20000</span>,<span class="at">ii=</span><span class="dv">24</span>,<span class="at">until=</span><span class="fu">set_units</span>(<span class="dv">5</span>, <span class="st">&quot;days&quot;</span>))</span>
<span id="cb117-8"><a href="第八章轻松创建rxode2事件.html#cb117-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-9"><a href="第八章轻松创建rxode2事件.html#cb117-9" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span> <span class="fu">seq</span>(bid,qd) <span class="sc">%&gt;%</span></span>
<span id="cb117-10"><a href="第八章轻松创建rxode2事件.html#cb117-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">18</span><span class="sc">*</span><span class="dv">24</span>,<span class="at">length.out=</span><span class="dv">500</span>));</span>
<span id="cb117-11"><a href="第八章轻松创建rxode2事件.html#cb117-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-12"><a href="第八章轻松创建rxode2事件.html#cb117-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, et) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-92-1.png" /></p>
<p>但是如果你把它们通过<code>rbind</code>组合</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="第八章轻松创建rxode2事件.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="do">## bid for 5 days</span></span>
<span id="cb118-2"><a href="第八章轻松创建rxode2事件.html#cb118-2" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span> <span class="fu">rbind</span>(bid,qd) <span class="sc">%&gt;%</span></span>
<span id="cb118-3"><a href="第八章轻松创建rxode2事件.html#cb118-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">18</span><span class="sc">*</span><span class="dv">24</span>,<span class="at">length.out=</span><span class="dv">500</span>));</span>
<span id="cb118-4"><a href="第八章轻松创建rxode2事件.html#cb118-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-5"><a href="第八章轻松创建rxode2事件.html#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, et) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-93-1.png" /></p>
<p>仍然适用等待期（但不考虑剂量间隔）</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="第八章轻松创建rxode2事件.html#cb119-1" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span> <span class="fu">rbind</span>(bid,<span class="at">wait=</span><span class="fu">set_units</span>(<span class="dv">10</span>,days),qd) <span class="sc">%&gt;%</span></span>
<span id="cb119-2"><a href="第八章轻松创建rxode2事件.html#cb119-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">18</span><span class="sc">*</span><span class="dv">24</span>,<span class="at">length.out=</span><span class="dv">500</span>));</span>
<span id="cb119-3"><a href="第八章轻松创建rxode2事件.html#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="第八章轻松创建rxode2事件.html#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, et) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-94-1.png" /></p>
<p>您还可以将这些表绑定在一起，并使事件表中的每个ID唯一；这可以很好地将具有不同预期剂量和采样时间的队列组合起来。这需要<code>id="unique"</code>选项;使用第一个例子可以显示出在这种情况下这是如何不同的:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="第八章轻松创建rxode2事件.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="do">## bid for 5 days</span></span>
<span id="cb120-2"><a href="第八章轻松创建rxode2事件.html#cb120-2" aria-hidden="true" tabindex="-1"></a>et <span class="ot">&lt;-</span> <span class="fu">etRbind</span>(bid,qd, <span class="at">id=</span><span class="st">&quot;unique&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-3"><a href="第八章轻松创建rxode2事件.html#cb120-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">et</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">150</span>,<span class="at">length.out=</span><span class="dv">500</span>));</span>
<span id="cb120-4"><a href="第八章轻松创建rxode2事件.html#cb120-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-5"><a href="第八章轻松创建rxode2事件.html#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb120-6"><a href="第八章轻松创建rxode2事件.html#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rxSolve</span>(m1, et) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(C2) <span class="sc">+</span> <span class="fu">facet_wrap</span>( <span class="sc">~</span> id)</span></code></pre></div>
<p><img src="assets/unnamed-chunk-95-1.png" /></p>
</div>
<div id="展开事件" class="section level2 hasAnchor">
<h2>8.9展开事件<a href="第八章轻松创建rxode2事件.html#展开事件" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>可以将事件表展开，使其将由<code>addl</code>折叠为一行的记录展开为多行记录，如下例所示：</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="第八章轻松创建rxode2事件.html#cb121-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="fu">et</span>() <span class="sc">%&gt;%</span></span>
<span id="cb121-2"><a href="第八章轻松创建rxode2事件.html#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">et</span>(<span class="at">dose=</span><span class="dv">50</span>, <span class="at">ii=</span><span class="dv">8</span>, <span class="at">until=</span><span class="dv">48</span>)</span>
<span id="cb121-3"><a href="第八章轻松创建rxode2事件.html#cb121-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-4"><a href="第八章轻松创建rxode2事件.html#cb121-4" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="第八章轻松创建rxode2事件.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 1 records ──</span></span>
<span id="cb122-2"><a href="第八章轻松创建rxode2事件.html#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb122-3"><a href="第八章轻松创建rxode2事件.html#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb122-4"><a href="第八章轻松创建rxode2事件.html#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb122-5"><a href="第八章轻松创建rxode2事件.html#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb122-6"><a href="第八章轻松创建rxode2事件.html#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiple doses in `addl` columns, expand with x$expand();</span></span>
<span id="cb122-7"><a href="第八章轻松创建rxode2事件.html#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or etExpand(x)</span></span>
<span id="cb122-8"><a href="第八章轻松创建rxode2事件.html#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb122-9"><a href="第八章轻松创建rxode2事件.html#cb122-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span id="cb122-10"><a href="第八章轻松创建rxode2事件.html#cb122-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    time   amt    ii  addl evid        </span></span>
<span id="cb122-11"><a href="第八章轻松创建rxode2事件.html#cb122-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;evid&gt;      </span></span>
<span id="cb122-12"><a href="第八章轻松创建rxode2事件.html#cb122-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     0    50     8     6 1:Dose (Add)</span></span></code></pre></div>
<p>您可以通过<code>$expand()</code>或<code>etExpand(ev)</code>来展开事件，使其不再包含<code>addl</code>项:</p>
<p>第一种方式，<code>etExpand(ev)</code>在不修改原始数据帧的情况下展开事件表:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="第八章轻松创建rxode2事件.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">etExpand</span>(ev)</span></code></pre></div>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="第八章轻松创建rxode2事件.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 7 records ──</span></span>
<span id="cb124-2"><a href="第八章轻松创建rxode2事件.html#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb124-3"><a href="第八章轻松创建rxode2事件.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb124-4"><a href="第八章轻松创建rxode2事件.html#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb124-5"><a href="第八章轻松创建rxode2事件.html#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb124-6"><a href="第八章轻松创建rxode2事件.html#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb124-7"><a href="第八章轻松创建rxode2事件.html#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 × 4</span></span>
<span id="cb124-8"><a href="第八章轻松创建rxode2事件.html#cb124-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    time   amt    ii evid        </span></span>
<span id="cb124-9"><a href="第八章轻松创建rxode2事件.html#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;evid&gt;      </span></span>
<span id="cb124-10"><a href="第八章轻松创建rxode2事件.html#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     0    50     0 1:Dose (Add)</span></span>
<span id="cb124-11"><a href="第八章轻松创建rxode2事件.html#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     8    50     0 1:Dose (Add)</span></span>
<span id="cb124-12"><a href="第八章轻松创建rxode2事件.html#cb124-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    16    50     0 1:Dose (Add)</span></span>
<span id="cb124-13"><a href="第八章轻松创建rxode2事件.html#cb124-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    24    50     0 1:Dose (Add)</span></span>
<span id="cb124-14"><a href="第八章轻松创建rxode2事件.html#cb124-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    32    50     0 1:Dose (Add)</span></span>
<span id="cb124-15"><a href="第八章轻松创建rxode2事件.html#cb124-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    40    50     0 1:Dose (Add)</span></span>
<span id="cb124-16"><a href="第八章轻松创建rxode2事件.html#cb124-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    48    50     0 1:Dose (Add)</span></span></code></pre></div>
<p>我们可以看到addl事件被展开了，但是原始数据帧保持不变:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="第八章轻松创建rxode2事件.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ev)</span></code></pre></div>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="第八章轻松创建rxode2事件.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 1 records ──</span></span>
<span id="cb126-2"><a href="第八章轻松创建rxode2事件.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 dosing records (see $get.dosing(); add with add.dosing or</span></span>
<span id="cb126-3"><a href="第八章轻松创建rxode2事件.html#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; et)</span></span>
<span id="cb126-4"><a href="第八章轻松创建rxode2事件.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see $get.sampling(); add with</span></span>
<span id="cb126-5"><a href="第八章轻松创建rxode2事件.html#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb126-6"><a href="第八章轻松创建rxode2事件.html#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; multiple doses in `addl` columns, expand with $expand(); or</span></span>
<span id="cb126-7"><a href="第八章轻松创建rxode2事件.html#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; etExpand()</span></span>
<span id="cb126-8"><a href="第八章轻松创建rxode2事件.html#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of : ──</span></span>
<span id="cb126-9"><a href="第八章轻松创建rxode2事件.html#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span id="cb126-10"><a href="第八章轻松创建rxode2事件.html#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    time   amt    ii  addl evid        </span></span>
<span id="cb126-11"><a href="第八章轻松创建rxode2事件.html#cb126-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;evid&gt;      </span></span>
<span id="cb126-12"><a href="第八章轻松创建rxode2事件.html#cb126-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     0    50     8     6 1:Dose (Add)</span></span></code></pre></div>
<p>第二种方式，如果您使用<code>ev$expand()</code>展开，它将修改<code>ev</code>对象。这是类似于面向对象的方法：</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="第八章轻松创建rxode2事件.html#cb127-1" aria-hidden="true" tabindex="-1"></a>ev<span class="sc">$</span><span class="fu">expand</span>()</span>
<span id="cb127-2"><a href="第八章轻松创建rxode2事件.html#cb127-2" aria-hidden="true" tabindex="-1"></a>ev</span></code></pre></div>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="第八章轻松创建rxode2事件.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── EventTable with 7 records ──</span></span>
<span id="cb128-2"><a href="第八章轻松创建rxode2事件.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 dosing records (see x$get.dosing(); add with add.dosing</span></span>
<span id="cb128-3"><a href="第八章轻松创建rxode2事件.html#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; or et)</span></span>
<span id="cb128-4"><a href="第八章轻松创建rxode2事件.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0 observation times (see x$get.sampling(); add with</span></span>
<span id="cb128-5"><a href="第八章轻松创建rxode2事件.html#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; add.sampling or et)</span></span>
<span id="cb128-6"><a href="第八章轻松创建rxode2事件.html#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── First part of x: ──</span></span>
<span id="cb128-7"><a href="第八章轻松创建rxode2事件.html#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 × 4</span></span>
<span id="cb128-8"><a href="第八章轻松创建rxode2事件.html#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    time   amt    ii evid        </span></span>
<span id="cb128-9"><a href="第八章轻松创建rxode2事件.html#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;evid&gt;      </span></span>
<span id="cb128-10"><a href="第八章轻松创建rxode2事件.html#cb128-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     0    50     0 1:Dose (Add)</span></span>
<span id="cb128-11"><a href="第八章轻松创建rxode2事件.html#cb128-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     8    50     0 1:Dose (Add)</span></span>
<span id="cb128-12"><a href="第八章轻松创建rxode2事件.html#cb128-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    16    50     0 1:Dose (Add)</span></span>
<span id="cb128-13"><a href="第八章轻松创建rxode2事件.html#cb128-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    24    50     0 1:Dose (Add)</span></span>
<span id="cb128-14"><a href="第八章轻松创建rxode2事件.html#cb128-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    32    50     0 1:Dose (Add)</span></span>
<span id="cb128-15"><a href="第八章轻松创建rxode2事件.html#cb128-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    40    50     0 1:Dose (Add)</span></span>
<span id="cb128-16"><a href="第八章轻松创建rxode2事件.html#cb128-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    48    50     0 1:Dose (Add)</span></span></code></pre></div>
</div>
<div id="rstudio笔记本中的事件表" class="section level2 hasAnchor">
<h2>8.10RStudio笔记本中的事件表<a href="第八章轻松创建rxode2事件.html#rstudio笔记本中的事件表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>除了上述示例中显示的控制台中的输出之外，RStudio笔记本的输出也有所不同，可以在以下屏幕截图中看到；</p>
<p>第一个屏幕截图显示了在Rstduio笔记本中评估事件表后的外观</p>
<p><img src="assets/eventTable-output-notebook-02.png" /></p>
<p>这是一个简单的数据框，允许您翻阅内容。如果您单击Rstduio笔记本输出中的第一个框，它将包含有关事件表的注释：</p>
<p><img src="assets/eventTable-output-notebook-01.png" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="第七章rxode2事件.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="第九章求解和求解选项.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": null
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true,
"toc_depth": 3
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
